describe("PaginatedProduct factory", function () {
	beforeEach(module('dnStore.shoppingCart'));

	beforeEach(module(function ($provide) {
		// mock the server request
		$provide.service('Products', function () {
			this.query = function (_, callback) {
				callback(testData);
			}
		});
	}));

	describe("When loaded", function () {
		it("should load 50 items per page and increment the page number", inject(function (PaginatedProducts) {
			expect(PaginatedProducts.currentPage()).toEqual( 1 );
			PaginatedProducts.loadMore(function (result){
				expect(result.length).toEqual( 50 );
				expect(PaginatedProducts.currentPage()).toEqual( 2 );
			});

		}));
	});

	var testData = JSON.parse(
		"{\"error\":false,\"products\":[{\"id\": \"1080\",\"name\": \"The Shawshank Redemption (1994)\",\"price\": 12.82,\"image_path\": \"9K9TO5KOJGX29I4F.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1081\",\"name\": \"The Godfather (1972)\",\"price\": 50.3,\"image_path\": \"A4I3NRKXYUIS1TDJ.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1082\",\"name\": \"The Godfather: Part II (1974)\",\"price\": 26.7,\"image_path\": \"0UNRS0PO0VCF0YO8.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1083\",\"name\": \"The Dark Knight (2008)\",\"price\": 30.23,\"image_path\": \"IQ04XV5UMHUX211T.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1084\",\"name\": \"Pulp Fiction (1994)\",\"price\": 16.73,\"image_path\": \"YLTXRDGHORBLGVK6.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1085\",\"name\": \"Schindler's List (1993)\",\"price\": 47.68,\"image_path\": \"ZH5I696HYTPCHSA4.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1086\",\"name\": \"12 Angry Men (1957)\",\"price\": 16.71,\"image_path\": \"DQR4R8EEJOE7DZ7T.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1087\",\"name\": \"Il buono, il brutto, il cattivo. (1966)\",\"price\": 42.4,\"image_path\": \"THQMUPGCR9YE67QB.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1088\",\"name\": \"The Lord of the Rings: The Return of the King (2003)\",\"price\": 37.84,\"image_path\": \"96RYHVMTI4UYAPEX.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1089\",\"name\": \"Fight Club (1999)\",\"price\": 44.66,\"image_path\": \"MYV0K24H3ISVVKTN.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1090\",\"name\": \"The Lord of the Rings: The Fellowship of the Ring (2001)\",\"price\": 16.95,\"image_path\": \"WFI87QBB9E6P5LKB.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1091\",\"name\": \"Star Wars: Episode V - The Empire Strikes Back (1980)\",\"price\": 7.77,\"image_path\": \"C9FM6IBTQ2W7905U.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1092\",\"name\": \"Forrest Gump (1994)\",\"price\": 48.5,\"image_path\": \"RCGLCO9BGKDPMZWL.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1093\",\"name\": \"Inception (2010)\",\"price\": 39.9,\"image_path\": \"N4IC2Q35M1TFHVXU.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1094\",\"name\": \"One Flew Over the Cuckoo's Nest (1975)\",\"price\": 44.85,\"image_path\": \"O307L37TC8UAICIB.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1095\",\"name\": \"The Lord of the Rings: The Two Towers (2002)\",\"price\": 46.44,\"image_path\": \"NH9924IFPKRY6F2R.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1096\",\"name\": \"Goodfellas (1990)\",\"price\": 35.62,\"image_path\": \"8QKL3BJ3YEMHTE65.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1097\",\"name\": \"The Matrix (1999)\",\"price\": 34.5,\"image_path\": \"3TDEPH2G7B5GTVKP.png\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1098\",\"name\": \"Star Wars (1977)\",\"price\": 22.19,\"image_path\": \"2MDML7LEUL1C057A.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1099\",\"name\": \"Shichinin no samurai (1954)\",\"price\": 10.23,\"image_path\": \"18SXOSVG2HLAL1IK.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1100\",\"name\": \"Cidade de Deus (2002)\",\"price\": 19.45,\"image_path\": \"GNWEME4QVHSD6J17.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1101\",\"name\": \"Interstellar (2014)\",\"price\": 33.4,\"image_path\": \"P2V98F642ED061UL.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1102\",\"name\": \"Se7en (1995)\",\"price\": 6.63,\"image_path\": \"OBKM4WOOQL4YZIXT.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1103\",\"name\": \"The Usual Suspects (1995)\",\"price\": 48.88,\"image_path\": \"4FI8YF4FXIYKQ4KY.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1104\",\"name\": \"The Silence of the Lambs (1991)\",\"price\": 40.5,\"image_path\": \"DWHMSWOBWMIE2C5D.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1105\",\"name\": \"It's a Wonderful Life (1946)\",\"price\": 17.52,\"image_path\": \"UM9I4KPFNZ2F7BO7.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1106\",\"name\": \"C'era una volta il West (1968)\",\"price\": 9.3,\"image_path\": \"D9PD637VO5AGI0KW.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1107\",\"name\": \"Léon (1994)\",\"price\": 9.1,\"image_path\": \"RP8V72IOFDN41XJV.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1108\",\"name\": \"La vita è bella (1997)\",\"price\": 28.56,\"image_path\": \"Y3UQ3YUW4GA17OZP.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1109\",\"name\": \"Casablanca (1942)\",\"price\": 39.22,\"image_path\": \"F7G05LYKC35CD59G.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1110\",\"name\": \"American History X (1998)\",\"price\": 31.36,\"image_path\": \"621F0QPFH8XVEUYC.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1111\",\"name\": \"Raiders of the Lost Ark (1981)\",\"price\": 20.12,\"image_path\": \"VQGP2VWZN4EWCASW.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1112\",\"name\": \"Saving Private Ryan (1998)\",\"price\": 48.61,\"image_path\": \"8CS9OP57LZE9DZEC.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1113\",\"name\": \"Sen to Chihiro no Kamikakushi (2001)\",\"price\": 7.9,\"image_path\": \"63GETHNPB4CROM2G.jpg\",\"updated_at\": \"2015-04-04 17:57:11\",\"created_at\": \"2015-04-04 17:57:11\"},{\"id\": \"1114\",\"name\": \"City Lights (1931)\",\"price\": 6.92,\"image_path\": \"2Y2E5YJST1JLLF21.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1115\",\"name\": \"Psycho (1960)\",\"price\": 6.87,\"image_path\": \"7V4SPU7FONYFEA3P.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1116\",\"name\": \"Rear Window (1954)\",\"price\": 32.63,\"image_path\": \"II1X2IZ4ZCA8JCAX.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1117\",\"name\": \"Whiplash (2014)\",\"price\": 22.26,\"image_path\": \"1I1AK74J7TVQHTZF.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1118\",\"name\": \"Intouchables (2011)\",\"price\": 26.74,\"image_path\": \"6TCOHPEPOVJOXGP0.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1119\",\"name\": \"Modern Times (1936)\",\"price\": 27.25,\"image_path\": \"2TVIJO94HYASH5SR.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1120\",\"name\": \"Terminator 2: Judgment Day (1991)\",\"price\": 48.33,\"image_path\": \"WQJNTKFG0GOOGIHT.png\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1121\",\"name\": \"The Green Mile (1999)\",\"price\": 23.9,\"image_path\": \"SSC2RRZ1VZG3TM3T.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1122\",\"name\": \"Memento (2000)\",\"price\": 14.79,\"image_path\": \"I3ZHFDSP0U7P7HN5.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1123\",\"name\": \"The Pianist (2002)\",\"price\": 16.53,\"image_path\": \"3N8JZGOI5UKGWVWK.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1124\",\"name\": \"The Departed (2006)\",\"price\": 14.24,\"image_path\": \"EXWVRTIC5YTGSZC6.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1125\",\"name\": \"Gladiator (2000)\",\"price\": 36.27,\"image_path\": \"QQ3539NGRGKAABWS.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1126\",\"name\": \"Apocalypse Now (1979)\",\"price\": 43.75,\"image_path\": \"M9DQK8RAJB590TRU.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1127\",\"name\": \"Sunset Blvd. (1950)\",\"price\": 32.22,\"image_path\": \"VGW9KRBLKZUSH7KI.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1128\",\"name\": \"Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb (1964)\",\"price\": 14.46,\"image_path\": \"DMERQXDAMUXC6FEX.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"},{\"id\": \"1129\",\"name\": \"Back to the Future (1985)\",\"price\": 19.94,\"image_path\": \"RL4PF97EFLG1URDV.jpg\",\"updated_at\": \"2015-04-04 17:57:12\",\"created_at\": \"2015-04-04 17:57:12\"}]}"
	);
});